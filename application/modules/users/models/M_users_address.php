<?phpclass M_users_address extends CI_Model {	public $_table_name = 'users_address';	function __construst() {		parent::__construst();	}		private function generate_where($args) {        if (isset($args['id'])) {            $this->db->where($this->_table_name . ".id", $args['id']);        }				if (isset($args['in_id'])) {            $this->db->where_in($this->_table_name . ".id", $args['in_id']);        }				if (isset($args['not_in_id'])) {            $this->db->where_not_in($this->_table_name . ".id", $args['not_in_id']);        }        if (isset($args['user_id'])) {            $this->db->where($this->_table_name . ".user_id", $args['user_id']);        }				if (isset($args['is_default_delivery_address'])) {            $this->db->where($this->_table_name . ".is_default_delivery_address", $args['is_default_delivery_address']);        }				if (isset($args['is_default_checkout_address'])) {            $this->db->where($this->_table_name . ".is_default_checkout_address", $args['is_default_checkout_address']);        }    }    private function generate_order_by($args) {        $allow_sort = array("DESC", "ASC");        if (isset($args['order_by']) && is_array($args['order_by']) && !empty($args['order_by'])) {            foreach ($args['order_by'] as $key => $value) {                $sort = in_array($value, $allow_sort) ? $value : "DESC";                $this->db->order_by($key, $sort);            }        }    }    public function gets($args) {        $this->db->select($this->_table_name . '.*,' . 'provinces.pNameVi as province_name, districts.dName as district_name, communes.name as commune_name');        $this->db->from($this->_table_name);				$this->db->join('provinces', 'provinces.pId = ' . $this->_table_name . '.province_id', 'left');		$this->db->join('districts', 'districts.dId = ' . $this->_table_name . '.district_id', 'left');		$this->db->join('communes', 'communes.id = ' . $this->_table_name . '.commune_id', 'left');        $this->generate_where($args);        $this->generate_order_by($args);        $query = $this->db->get();        return $query->result_array();    }    public function counts($args) {        $this->db->select();        $this->db->from($this->_table_name);        $this->generate_where($args);        $query = $this->db->get();        return $query->num_rows();    }    public function get($args) {		$this->db->select($this->_table_name . '.*,' . 'provinces.pNameVi as province_name, districts.dName as district_name, communes.name as commune_name');        $this->db->from($this->_table_name);				$this->db->join('provinces', 'provinces.pId = ' . $this->_table_name . '.province_id', 'left');		$this->db->join('districts', 'districts.dId = ' . $this->_table_name . '.district_id', 'left');		$this->db->join('communes', 'communes.id = ' . $this->_table_name . '.commune_id', 'left');        $this->generate_where($args);        $query = $this->db->get();        return $query->row_array();    }    function add($data = array()) {        if (empty($data)) {            return 0;        }        $query = $this->db->insert($this->_table_name, $data);        $insert_id = $this->db->insert_id();        return (isset($query)) ? $insert_id : 0;    }    public function update($args, $data) {        if (empty($args) || empty($data)) {            return false;        }        $this->generate_where($args);        $query = $this->db->update($this->_table_name, $data);        return (isset($query)) ? true : false;    }    function delete($args) {        if (empty($args)) {            return false;        }        $this->generate_where($args);        $query = $this->db->delete($this->_table_name);        return (isset($query)) ? true : false;    }}/* End of file m_users_address.php *//* Location: ./application/modules/users/models/m_users_address.php */